\documentclass{beamer}

\usetheme{Madrid}
\useoutertheme[subsection=false]{miniframes}
\setbeamertemplate{footline}{}

\usepackage{listings}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{tcolorbox}
\tcbuselibrary{listings,skins}

\definecolor{darkgreen}{RGB}{0,100,0} % darker than default green

\logo{\includegraphics[height=0.6cm]{Images/cloudRepublic.png}}

\newtcblisting{codebox}{
  listing engine=listings,
  colback=codegray,
  colframe=black,
  listing only,
  enhanced,
  boxrule=0.5pt,
  sharp corners=northwest,
  sharp corners=southeast,
  rounded corners=southwest northeast,
  arc=10pt,
  left=4pt,
  right=4pt,
  top=4pt,
  bottom=4pt
}

\lstset{
  emph={AddOpenApi,MapOpenApi},
  emphstyle=\color{blue}\bfseries,
  emph={[2]AddEndpointsApiExplorer,AddSwaggerGen,UseSwagger,UseSwaggerUI,WithOpenApi},
  emphstyle={[2]\color{darkgreen}\bfseries},
  backgroundcolor=\color{codegray},
  basicstyle=\ttfamily\small,
  breaklines=true,
  showstringspaces=false
}

\input{commands.tex}

\title{Farewell Swashbuckle}
\subtitle{Navigating .NET 10â€™s New OpenAPI Waters}
\author{Casper Dijkstra}
\date{February 10th, 2026}

\begin{document}

\titlepagecustom

\section{Introduction}

\begin{frame}{Why should we care?}
Swashbuckle
\begin{itemize}
    \item Shipped by default in earlier .NET versions
    \item Generated the OpenAPI spec and hosted the Swagger UI
    \item Third-party dependency with opinionated defaults
\end{itemize}
\end{frame}

\begin{frame}[fragile]{.NET 9 Changed the Defaults}
    \begin{itemize}
      \item OpenAPI specs are now generated natively,
    
      \item NuGet
          \begin{verbatim}
              Microsoft.AspNetCore.OpenApi
          \end{verbatim}
        ships as part of the ASP.NET Core shared framework in .NET 9 and later. You typically do not need to add a package reference,
     \item Microsoft intentionally stopped shipping a UI out of the box.
    \end{itemize} 
\end{frame}

\section{Openapi generation}

\begin{frame}[fragile]{Minimal OpenAPI Setup (.NET 8)}
\begin{codebox}
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.MapGet("/hello", () => "Hello world!").WithOpenApi();

app.Run();
\end{codebox}
\end{frame}

\begin{frame}[fragile]{Minimal OpenAPI Setup (.NET 10)}
\begin{codebox}
builder.Services.AddOpenApi();

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.MapOpenApi();
}

app.MapGet("/hello", () => "Hello world!");

app.Run();
\end{codebox}
\end{frame}

\begin{frame}[fragile]{OpenAPI specs}
\begin{itemize}
    \item In .NET 8, `AddEndpointsApiExplorer()' was needed for Swashbuckle to detect minimal API endpoints. In .NET 10, the framework    automatically generates OpenAPI metadata.
    \item .NET 8 \begin{codebox}
        OpenApi: (...)/swagger/v1/swagger.json
        UI: (...)/swagger/index.html
    \end{codebox}
    \item .NET 10 \begin{codebox}
        OpenApi: (...)/openapi/v1.json
        UI: [404]
    \end{codebox}
\end{itemize}
\end{frame}

\begin{frame}{OpenAPI Changes in .NET 10}
\begin{itemize}
    \item \textbf{OpenAPI version:} 3.0 $\to$ 3.1
    \item \textbf{Data annotations:} 
        \begin{itemize}
            \item \texttt{[Required]} fields now appear in OpenAPI as \texttt{"required": [...]} 
        \end{itemize}
    \item \textbf{Servers section:} added by default in OpenAPI 3.1
    \item \textbf{Summary:} OpenAPI 3.1 brings better JSON Schema alignment, but some constraints from .NET attributes require transformers for full representation
\end{itemize}
\end{frame}

\section{Openapi UI}
\begin{frame}{OpenAPI $\neq$ Swagger UI}
\begin{itemize}
  \item Swagger UI is just one OpenAPI consumer
  \item Separation of concerns:
    \begin{itemize}
      \item OpenAPI document generation
      \item UI and presentation
    \end{itemize}
  \item You choose the UI that fits your team
\end{itemize}
\end{frame}

\begin{frame}{UI Options}
\begin{enumerate}
    \item Swagger UI (still works)
    \item \textcolor{darkgreen}{Scalar; modern, clean, developer-first $\leftarrow$ I'll show this one} 
    \item Redoc or custom tooling
\end{enumerate}
\end{frame}

\begin{frame}[fragile]{Using Scalar}
\begin{lstlisting}[language=CSharp]
app.MapScalarApiReference(options =>
{
    options
        .WithTitle("My API")
        .WithTheme(ScalarTheme.Blue);
});
\end{lstlisting}
\end{frame}

\begin{frame}{.NET 10 OpenAPI Highlights}
\begin{itemize}
  \item OpenAPI 3.1 support
  \item Better JSON Schema alignment
  \item Multiple output formats (JSON, YAML)
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Endpoint Transformer Example}
\begin{lstlisting}[language=CSharp]
builder.Services.AddOpenApi(options =>
{
    options.AddEndpointTransformer((context, description) =>
    {
        if (context.HttpMethod == "DELETE")
        {
            description.Deprecated = true;
        }
    });
});
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Document Transformer Example}
\begin{lstlisting}[language=CSharp]
options.AddDocumentTransformer((document, context) =>
{
    document.Info.Description =
        context.Environment.IsProduction()
            ? "Public API"
            : "Internal / Development API";
});
\end{lstlisting}
\end{frame}

\begin{frame}{The New Mental Model}
\begin{itemize}
  \item Endpoints generate OpenAPI
  \item Transformers shape the document
  \item UI renders the experience
\end{itemize}
\end{frame}

\begin{frame}{Key Takeaways}
\begin{itemize}
  \item Native OpenAPI is lighter and more flexible
  \item Document and endpoint transformers allow us to tailor our OpenApi specs
  \begin{itemize}
      \item Mark API deprecated
      \item Only public/private APIs in document
  \end{itemize}
  \item Swashbuckle is optional; not gone. Alternatives like scalar can also be used.
\end{itemize}
\end{frame}

\begin{frame}
  \centering
  \includegraphics[width=\linewidth,height=0.85\textheight,keepaspectratio]{Images/swashbuckle.jpg}
\end{frame}

\tussenslide
{
    Questions?
}
{
    Feedback?
}

\end{document}
